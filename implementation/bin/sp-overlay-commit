#!/usr/bin/env bash
set -euo pipefail

overlay="${1:?overlay required}"
repo="${SP_REPO_ROOT:-.}"
base="$repo/.sp/log.tsv"
ofile="$repo/.sp/overlays/$overlay.tsv"

[[ -f "$ofile" ]] || { echo "No such overlay." >&2; exit 1; }

cat "$ofile" >> "$base"
rm "$ofile"

echo "Committed overlay: $overlay"

